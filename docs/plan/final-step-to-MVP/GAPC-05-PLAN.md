# GAPC-05 PLAN：安全基线（Report + Rule Visibility）

对应 GAP：`G12`  
依赖：`INFRA-PLAN.md`（统一事件日志、基础后台任务）

## 目标

1. 在用户端建立“可见的安全姿态”，满足 PRD 最小不可妥协要求。
2. 提供可用的举报入口与处理状态流。
3. 让安全规则在 PR 页面显式可读。

## 方案范围

后端：

1. 新增 `safety_reports` 表：
   - `id`
   - `prId`
   - `reporterUserId`（可空）
   - `reason`
   - `details`
   - `status` (`OPEN`/`REVIEWING`/`RESOLVED`/`DISMISSED`)
   - `createdAt` / `updatedAt`
2. 新增举报 API：
   - `POST /api/safety/report`
   - `GET /api/safety/report/:id`（可选）

前端：

1. PR 页新增“举报”按钮与表单弹层。
2. 页面新增“公共场地 / 安全规则”固定说明模块。
3. 举报提交后反馈工单号与处理提示。

## 分阶段实施

### Phase 1：规则展示

1. 增加安全规则配置项与渲染模块。
2. 确保所有 PR 页可见且文案一致。

### Phase 2：举报链路

1. 实现举报表单与 API。
2. 接入最小字段校验与限流。
3. 记录举报事件用于后续分析。

### Phase 3：运营处理最小闭环

1. 提供内部查询/导出接口（MVP 可不做完整后台 UI）。
2. 支持状态流转并保留处理备注。

## 验收标准

1. 用户可在 PR 页一键进入举报流程并成功提交。
2. 举报数据可被运营检索并进行状态管理。
3. 安全规则在所有 PR 页均可见，不依赖外部文档解释。

## 风险与决策

1. MVP 先做“可提交+可处理”，不做复杂风控算法。
2. 举报入口必须轻量，不影响主流程转化。
